
- MongoDB 쿼리는 **Create, Read, Update, Delete (CRUD)** 네 가지 작업으로 구성.

## 1. 컬렌션 생성

### 1.1 암시적 생성
- 컬렉션은 첫 번째 도큐먼트를 삽입할 때 자동으로 생성.
- `db.collection.insertOne()` 또는 `db.collection.insertMany()`명령을 사용하면, 지정한 컬렉션이 존재하지 않을 경우 MongoDB가 해당 컬렉션을 만들고 도큐먼트를 추가
```json
db.users.insertOne({
            name: "John Doe",
            age: 30,
            email: "john.doe@example.com",
            status: "active"
          })
```

### 1.2 명시적 생성
- `db.createCollection()` 명령을 사용하여 컬렉션을 직접 만들 수 있음
- 컬렉션에 대한 특정 옵션(예: 최대 크기 제한, 유효성 검사 규칙)을 설정할 수 있습dma
```json
db.createCollection("posts")

db.createCollection("logs", {
				              capped: true,
				              size: 5242880, // 5MB
                             max: 5000
		            })
```
## Create 
- 새로운 데이터를 데이터베이스에 추가하는 작업.
- **`db.collection.insertOne({ ... })`**: 하나의 도큐먼트를 추가.
	```json
			db.users.insertOne({
            name: "John Doe",
            age: 30,
            email: "john.doe@example.com",
            status: "active"
          })
	```
- **`db.collection.insertMany([ { ... }, { ... } ])`**: 여러 도큐먼트를 배열 형태로 동시에 추가.
	```json
		  db.users.insertMany([
            { name: "Jane Smith", age: 25, email: "jane.smith@example.com", status: "active" },
            { name: "Peter Jones", age: 42, email: "peter.jones@example.com", status: "inactive" }
          ])
		```
        

## Read (데이터 조회)
- 데이터베이스에서 조건에 맞는 데이터를 찾는 작업.
- **`db.collection.find({ <query> }, { <projection> })`**: 조건에 맞는 모든 도큐먼트를 조회.
    - **`<query>`**: 조회할 조건을 명시.
        - 모든 데이터 조회: `{}`
        - 특정 조건 조회: `{ age: 30 }`
        - 쿼리 연산자 사용:
            - `$gt`: 특정 값보다 큰 도큐먼트 조회. (예: `age`가 25보다 큰 경우)
				 -  `db.users.find({ age: { $gt: 25 } })`
            - `$in`: 여러 값 중 하나라도 일치하는 도큐먼트 조회. (예: `status`가 "active" 또는 "pending"인 경우)
	            -  `db.users.find({ status: { $in: ["active", "pending"] } })`
			- `$or`: 여러 조건 중 하나라도 맞는 도큐먼트 조회.
            ```json
              db.users.find({
                    $or: [
                      { age: { $lt: 25 } },
                      { status: "inactive" }
                    ]
                  })
            ```

    - **`<projection>`**: 결과에서 보여줄 필드를 선택. (`1`: 포함, `0`: 제외)
        - 예시: `name`과 `email` 필드만 포함 (`_id`는 명시적으로 제외)
            -  `db.users.find({ age: { $gt: 25 } }, { name: 1, email: 1, _id: 0 })`

- **`db.collection.findOne({ <query> })`**: 조건에 맞는 첫 번째 도큐먼트 하나만 조회.

## Update (데이터 수정)
- 기존 도큐먼트의 내용을 변경하는 작업.
- **`db.collection.updateOne({ <filter> }, { <update> })`**: 조건에 맞는 첫 번째 도큐먼트 하나를 수정.
    - **`<update>`** 에는 반드시 수정 연산자를 사용해야 함.
        - `$set`: 특정 필드의 값을 수정하거나 추가.
            - db.users.updateOne({ name: "John Doe" }, { `$set`: { age: 31 } })

        - `$inc`: 숫자 필드의 값을 증가시키거나 감소.
	        - db.users.updateOne({ name: "John Doe" }, { `$inc`: { age: 1 } })

        - `$push`: 배열 필드에 새로운 값을 추가
	        - db.users.updateOne({ name: "John Doe" }, { `$push`: { hobbies: "reading" } })

- **`db.collection.updateMany({ <filter> }, { <update> })`**: 조건에 맞는 모든 도큐먼트를 수정.
    - 예시: `status`가 "inactive"인 모든 사용자를 "archived"로 변경.
         -  db.users.updateMany({ status: "inactive" }, { `$set`: { status: "archived" } })

## Delete (데이터 삭제)
- 도큐먼트를 데이터베이스에서 제거하는 작업.
- **`db.collection.deleteOne({ <filter> })`**: 조건에 맞는 첫 번째 도큐먼트 하나를 삭제.
	- `db.users.deleteOne({ name: "Peter Jones" })`

- **`db.collection.deleteMany({ <filter> })`**: 조건에 맞는 모든 도큐먼트를 삭제.
	- ` db.users.deleteMany({ status: "archived" })`
- **주의**: `{}`를 조건으로 주면 컬렉션의 모든 도큐먼트가 삭제되므로 신중하게 사용해야 함.